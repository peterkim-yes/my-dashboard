<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Personal Dashboard</title><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;600;700&display=swap" rel="stylesheet"><style>:root{--background-color:#121212;--card-background:#1e1e1e;--text-color:#e0e0e0;--secondary-text:#999999;--border-color:#333333;--accent-color:#4CAF50;}body{background-color:var(--background-color);color:var(--text-color);font-family:'Roboto',sans-serif;padding-bottom:50px;}.container{max-width:1400px;}.card{background-color:var(--card-background);color:var(--text-color);border:1px solid var(--border-color);border-radius:12px;box-shadow:0 4px 6px rgba(0,0,0,.3);height:100%;}h1,h2,h3{color:var(--text-color);font-weight:600;}iframe{border-radius:8px;overflow:hidden;border:1px solid var(--border-color)!important;}.todo-item{display:flex;align-items:center;justify-content:space-between;padding:10px 0;border-bottom:1px solid var(--border-color);transition:background-color .3s;}.todo-item:last-child{border-bottom:none;}.todo-item.completed{text-decoration:line-through;color:var(--secondary-text);}.delete-btn{background:none;border:none;color:#ff5252;font-size:1.2rem;cursor:pointer;padding:0 5px;opacity:.7;transition:opacity .2s;}.delete-btn:hover{opacity:1;}.task-checkbox{margin-right:15px;width:20px;height:20px;cursor:pointer;}.task-content{flex-grow:1;cursor:pointer;}.form-control{background-color:#333;border:1px solid #555;color:#fff;}.form-control:focus{background-color:#333;color:#fff;border-color:var(--accent-color);box-shadow:0 0 0 .25rem rgba(76,175,80,.25);}</style></head><body><div class="container mt-5"><header class="text-center mb-5"><h1 class="display-4">My Personal Dashboard</h1></header><div class="row"><div class="col-md-8 d-flex flex-column"><div class="row flex-grow-1"><div class="col-md-12 d-flex"><section id="schedule" class="card p-3 mb-4 flex-grow-1"><h2>Today's Schedule</h2><iframe src="https://calendar.google.com/calendar/embed?src=sunkyu0702%40gmail.com&ctz=Asia%2FSeoul" style="border:0" width="100%" height="550" frameborder="0" scrolling="no"></iframe></section></div></div><section id="design" class="card p-3 mb-4"><h2>Design Inspiration (Notion Embed)</h2><iframe src="https://cut-midnight-8d0.notion.site/ebd/f9c038827137408c883593fef6914b44" width="100%" height="550" frameborder="0" allowfullscreen></iframe></section></div><div class="col-md-4 d-flex flex-column"><section id="economy" class="card p-3 mb-4"><h2>Key Market Indicators (Including Crypto)</h2><div class="tradingview-widget-container"><div class="tradingview-widget-container__widget"></div><div class="tradingview-widget-copyright"><a href="https://www.tradingview.com/markets/" rel="noopener nofollow" target="_blank"><span class="blue-text">World markets</span></a><span class="trademark"> by TradingView</span></div><script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js" async>{
                            "colorTheme":"dark", "dateRange":"12M", "locale":"en", "largeChartUrl":"",
                            "isTransparent":false, "showFloatingTooltip":false, "plotLineColorGrowing":"rgba(76, 175, 80, 1)", 
                            "plotLineColorFalling":"rgba(76, 175, 80, 1)", "gridLineColor":"rgba(240, 243, 250, 0)",
                            "scaleFontColor":"#DBDBDB", "belowLineFillColorGrowing":"rgba(76, 175, 80, 0.12)", 
                            "belowLineFillColorFalling":"rgba(76, 175, 80, 0.12)", "belowLineFillColorGrowingBottom":"rgba(76, 175, 80, 0)", 
                            "belowLineFillColorFallingBottom":"rgba(76, 175, 80, 0)", "symbolActiveColor":"rgba(76, 175, 80, 0.12)", 
                            "tabs":[
                                { "title":"Index", "symbols":[ { "s":"NASDAQ:NDAQ", "d":"NASDAQ" }, { "s":"KRX:KOSPI", "d":"KOSPI" } ], "originalTitle":"Index" },
                                {
                                    "title":"Crypto",
                                    "symbols":[
                                        { "s":"BINANCE:BTCUSDT", "d":"BTC/USDT", "base-currency-logoid":"crypto/XTVCBTC", "currency-logoid":"crypto/XTVCUSDT" },
                                        { "s":"BINANCE:ETHUSDT", "d":"ETH/USDT", "base-currency-logoid":"crypto/XTVCETH", "currency-logoid":"crypto/XTVCUSDT" }
                                    ],
                                    "originalTitle":"Crypto"
                                },
                                { "title":"Futures", "symbols":[ { "s":"BMFBOVESPA:ISP1!", "d":"S&P 500" }, { "s":"CMCMARKETS:GOLD", "d":"Gold" }, { "s":"PYTH:WTI3!", "d":"WTI Crude Oil" } ], "originalTitle":"Futures" },
                                { "title":"Forex", "symbols":[ { "s":"FX:EURUSD", "d":"EUR to USD" }, { "s":"FX:USDJPY", "d":"USD to JPY" } ] }
                            ],
                            "support_host":"https://www.tradingview.com", "backgroundColor":"#0f0f0f",
                            "width":"100%", "height":"550", "showSymbolLogo":true, "showChart":true
                        }</script></div></section><section id="extra" class="card p-3 mb-4 flex-grow-1"><h2>My To-Do List</h2><p id="authStatus" style="font-size:.8rem;color:#03A9F4;margin-bottom:5px;">Checking Authentication Status...</p><div class="input-group mb-3"><input type="text" id="todoInput" class="form-control" placeholder="Enter a new task" aria-label="New todo item"><button class="btn btn-success" type="button" id="addTodoBtn" style="background-color:var(--accent-color);border-color:var(--accent-color);">Add</button></div><div id="todoList" class="list-group list-group-flush" style="max-height:400px;overflow-y:auto;"><p id="loadingIndicator" style="color:var(--secondary-text);">Loading...</p></div></section></div></div></div><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script><script type="module">import{initializeApp}from"https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";import{getAuth,signInAnonymously,signInWithCustomToken,onAuthStateChanged}from"https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";import{getFirestore,collection,addDoc,doc,updateDoc,deleteDoc,onSnapshot}from"https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";let db;let auth;let userId=null;let isAuthReady=false;const appId=typeof __app_id!=='undefined'?__app_id:'default-app-id';const firebaseConfig=typeof __firebase_config!=='undefined'?JSON.parse(__firebase_config):{};const initialAuthToken=typeof __initial_auth_token!=='undefined'?__initial_auth_token:null;const authStatusElement=document.getElementById('authStatus');async function initFirebaseAndAuth(){try{if(Object.keys(firebaseConfig).length===0){console.error("Firebase Config is missing.");authStatusElement.textContent="Error: Firebase config is missing.";return;}const app=initializeApp(firebaseConfig);db=getFirestore(app);auth=getAuth(app);onAuthStateChanged(auth,async user=>{if(user){userId=user.uid;isAuthReady=true;authStatusElement.textContent=`Logged in: ${userId.substring(0,8)}...`;console.log("Authentication successful. User ID:",userId);setupFirestoreListener();}else{if(!isAuthReady){authStatusElement.textContent="Authenticating user...";try{if(initialAuthToken){await signInWithCustomToken(auth,initialAuthToken);}else{await signInAnonymously(auth);}}catch(e){console.error("Sign-in attempt failed:",e);authStatusElement.textContent="Error: Authentication failed. Check console.";}}else{authStatusElement.textContent="Error: Invalid authentication state.";}}});}catch(error){console.error("Firebase initialization failed:",error);authStatusElement.textContent="Error: Firebase initialization failed.";}}function setupFirestoreListener(){if(!db||!userId)return;const loadingIndicator=document.getElementById('loadingIndicator');const todoCollectionRef=collection(db,`artifacts/${appId}/users/${userId}/todos`);onSnapshot(todoCollectionRef,snapshot=>{const todos=[];snapshot.forEach(doc=>{todos.push({id:doc.id,...doc.data()});});todos.sort((a,b)=>b.timestamp-a.timestamp);renderTodos(todos);loadingIndicator.style.display='none';},(error)=>{console.error("Error listening to Firestore:",error);loadingIndicator.textContent="Error: Failed to load To-Do list. Check console.";});}function renderTodos(todos){const todoListElement=document.getElementById('todoList');todoListElement.innerHTML='';if(todos.length===0){todoListElement.innerHTML='<p class="text-center p-3" style="color:var(--secondary-text);">No tasks yet. Try adding a new one!</p>';return;}todos.forEach(todo=>{const itemDiv=document.createElement('div');itemDiv.className=`todo-item ${todo.completed?'completed':''}`;itemDiv.setAttribute('data-id',todo.id);itemDiv.innerHTML=`<input type="checkbox" class="task-checkbox" ${todo.completed?'checked':''} data-action="toggle"><span class="task-content" data-action="toggle">${todo.text}</span><button class="delete-btn" data-action="delete">&times;</button>`;itemDiv.addEventListener('click',e=>handleTodoAction(e,todo.id,todo.completed));todoListElement.appendChild(itemDiv);});}async function addTodo(){const inputElement=document.getElementById('todoInput');const text=inputElement.value.trim();if(!text||!db||!userId){if(!db||!userId)console.error("Database or User ID not ready.");return;}try{const todoCollectionRef=collection(db,`artifacts/${appId}/users/${userId}/todos`);await addDoc(todoCollectionRef,{text:text,completed:false,timestamp:Date.now()});inputElement.value='';}catch(error){console.error("Error adding document: ",error);}}async function toggleTodo(id,currentCompletedStatus){if(!db||!userId)return;try{const todoDocRef=doc(db,`artifacts/${appId}/users/${userId}/todos`,id);await updateDoc(todoDocRef,{completed:!currentCompletedStatus});}catch(error){console.error("Error updating document: ",error);}}async function deleteTodo(id){if(!db||!userId)return;try{const todoDocRef=doc(db,`artifacts/${appId}/users/${userId}/todos`,id);await deleteDoc(todoDocRef);}catch(error){console.error("Error deleting document: ",error);}}function handleTodoAction(e,id,completedStatus){const action=e.target.getAttribute('data-action');const isCheckbox=e.target.classList.contains('task-checkbox');if(action==='toggle'||isCheckbox){toggleTodo(id,completedStatus);}else if(action==='delete'){deleteTodo(id);}}document.addEventListener('DOMContentLoaded',()=>{initFirebaseAndAuth();const addTodoBtn=document.getElementById('addTodoBtn');const todoInput=document.getElementById('todoInput');addTodoBtn.addEventListener('click',addTodo);todoInput.addEventListener('keypress',e=>{if(e.key==='Enter'){e.preventDefault();addDoc();}});});</script></body></html>